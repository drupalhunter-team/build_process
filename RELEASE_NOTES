* evnirnonment is prepared for dynamic library support
* TEST_COMPONENT flag no longer is needed
* reorganisation of code - more common code separated
